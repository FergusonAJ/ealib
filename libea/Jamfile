import testing ;
import os ;
local PREFIX = [ os.environ PREFIX ] ;

if $(PREFIX) = "" {
    PREFIX = "/usr/local" ;
}

alias libea : : : : <include>./include ;

lib libea_runner :
    src/main.cpp
    src/runner.cpp
    libea
    /boost//program_options
    /boost//serialization
    /boost//signals
    /boost//iostreams
    /boost//regex
    /site-config//z
    ;

run test/test_libea.cpp
    test/test_circular.cpp
    test/test_analysis.cpp
    test/test_checkpoint.cpp
#    test/test_ealife.cpp
    test/test_generational.cpp
    test/test_meta_data.cpp
    test/test_recombination.cpp
#    test/test_meta_population.cpp
    test/test_rng.cpp
    test/test_selection.cpp
    libea
    /boost//program_options
    /boost//serialization
    /boost//signals
    /boost//iostreams
    /boost//regex
    /boost//unit_test_framework
    /site-config//z
    ;

#alias install : install-lib install-headers ;

#install install-lib : 
#    libea_runner 
#    : <location>$(PREFIX)/lib <install-type>LIB
#    ;

#install install-headers :
#    [ glob-tree *.h : test $(PREFIX) ]
#    : <location>$(PREFIX)/include <install-source-root>include
#    ;

